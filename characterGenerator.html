<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
  <title>Primordial Waters - Character Generator</title>
  <style>
	body {
		background-color: #ACF;
		font-family: "Roboto","Arial",sans-serif;
	}

	button.addrow {
		background-color: #0460CD;
		border: none;
		color: white;
		padding: 8px 12px;
		text-decoration: none;
		margin: 4px 4px;
		cursor: pointer;
	}

	button.delrow {
		background-color: #0460CD;
		border: none;
		color: white;
		padding: 4px 8px;
		text-decoration: none;
		margin: 0px 0px;
		cursor: pointer;
	}

	input {
		font-family: "Roboto","Arial",sans-serif;
		font-size: 14px;
	}

	input[type=text], input[type=number] {
		background-color: #D9E9FF;
		border: 1px solid #000;
		padding: 3px 3px;
		text-decoration: none;
		margin: none;
		cursor: pointer;
	}

	input[type=number] {
		text-align: right;
	}

	input:read-only, textarea:read-only {
		background-color: lightgrey;
	}

	input.description {
		width: 99%;
	}

	input.name {
		width: 99.25%;
	}

	textarea {
		background-color: #D9E9FF;
		border: 1px solid #000;
		padding: 3px 3px;
		text-decoration: none;
		margin: none;
		cursor: pointer;
		font-family: "Roboto","Arial",sans-serif;
		font-size: 14px;
		resize: none;
	}

	textarea.description {
		width: 99.25%;
	}

	.container {
		display: grid;
		grid-template-columns: 1fr 1fr;
		justify-items: center;
		grid-template-areas:
			"general attributes"
			"skills skills"
			"traits traits"
			"effects effects";
		flex-grow: 1;
		container-type: inline-size;
		container-name: container;
		margin-left: 10vw;
		margin-right: 10vw;
	}

	.divgeneral {
		grid-area: general;
	}

	.divattributes {
		grid-area: attributes;
	}

	.portrait {
		grid-area: portrait;
		display:none;
	}

	/* .portrait > img{   */
	/*	max-width:33vw;   */
	/*	max-height:300px; */
	/* }                  */

	.divskills {
		grid-area: skills;
		column-span: 2;
		width: 100%;
	}

	.divtraits {
		grid-area: traits;
		column-span: 2;
		width: 100%;
	}

	.diveffects {
		grid-area: effects;
		column-span: 2;
		padding-bottom: 75px;
		width: 100%;
	}

	.divrules {
		grid-area: rules;
		padding-bottom: 75px;
		width: 0vw;
		margin: 0px;
		transition: width 2s;
	}

	.footer {
		display: flex;
		flex-direction: horizontal;
		position: fixed;
		left: 0;
		bottom: 0;
		height: 75px;
		width: 100%;
		background-color: #D9E9FF;
		align-items: center;
		justify-content: center;
		gap: 20px;
	}

	@media only screen and (max-width:1100px) {
		.container {
			grid-template-columns: 1fr;
			grid-template-areas:
				/* "portrait" */
				"general"
				"attributes"
				"skills"
	            "traits"
	            "effects"
				"roll"
				"check";
			margin-left: 0vw;
			margin-right: 0vw;
		}
	}

	#rollresults {
		text-align: center;
	}

	.resulthighlighted {
	  /* color: #0460CD; */
	  color: #000;
	  transition: color 500ms linear;
	}

	.resultobscured {
		color: #888;
	  transition: color 500ms linear;
	}

	.resultnormal {
		color: #000;
		transition: color 500ms linear;
	}

	.divskill {
		display: grid;
		grid-template-columns: 1fr 3fr 0fr 0fr 0fr 0fr;
		grid-template-areas:
			"name description cost level use delete";
		grid-column-gap: 5px;
		margin-bottom: 5px;
	}
	.skill-grid-item-name {
		grid-area: name;
		text-align: center;
		padding-top: 1px;
		padding-right: 4px;
		padding-left: 4px;
	}
	.skill-grid-item-description {
		grid-area: description;
		text-align: center;
		padding-right: 4px;
		padding-left: 4px;
	}
	.skill-grid-item-cost {
		grid-area: cost;
		text-align: center;
	}
	.skill-grid-item-level {
		grid-area: level;
		text-align: center;
	}
	.skill-grid-item-use {
		grid-area: use;
		text-align: center;
	}
	.skill-grid-item-deleterow {
		grid-area: delete;
		text-align: center;
	}

	.divtrait {
		display: grid;
		grid-template-columns: 1fr 3fr 0fr 0fr 0fr;
		grid-template-areas:
			"name description cost use delete";
		grid-column-gap: 5px;
		margin-bottom: 5px;
	}
	.trait-grid-item-name {
		grid-area: name;
		text-align: center;
		padding-top: 1px;
		padding-right: 4px;
		padding-left: 4px;
	}
	.trait-grid-item-description {
		grid-area: description;
		text-align: center;
		padding-right: 4px;
		padding-left: 4px;
	}
	.trait-grid-item-cost {
		grid-area: cost;
		text-align: center;
	}
	.trait-grid-item-use {
		grid-area: use;
		text-align: center;
	}
	.trait-grid-item-deleterow {
		grid-area: delete;
		text-align: center;
	}

	.diveffect {
		display: grid;
		grid-template-columns: 1fr 3fr 0fr 0fr 0fr;
		grid-template-areas:
			"name description ep num delete";
		grid-column-gap: 5px;
		margin-bottom: 5px;
	}
	.effect-grid-item-name {
		grid-area: name;
		text-align: center;
		padding-top: 1px;
		padding-right: 4px;
		padding-left: 4px;
	}
	.effect-grid-item-description {
		grid-area: description;
		text-align: center;
		padding-right: 4px;
		padding-left: 4px;
	}
	.effect-grid-item-ep {
		grid-area: ep;
		text-align: center;
	}
	.effect-grid-item-num {
		grid-area: num;
		text-align: center;
	}
	.effect-grid-item-deleterow {
		grid-area: delete;
		text-align: center;
	}

	@media only screen and (max-width:1100px) {
		.divskill {
			grid-template-columns: 1fr 0fr 0fr 0fr 0fr;
			grid-template-areas:
				"name cost level use delete"
			    "description description description description description";
		}
		.divtrait {
			grid-template-columns: 1fr 0fr 0fr 0fr;
			grid-template-areas:
				"name cost use delete"
			    "description description description description";
		}
		.diveffect {
			grid-template-columns: 1fr 0fr 0fr 0fr;
			grid-template-areas:
				"name ep num delete"
			    "description description description description";
		}
	}

	@media only screen and (max-width:470px) {
		.rolldiebutton {
			display: none;
		}
	}
  </style>

  <body>
	<div class="container">
	  <div class="portrait">
		<img id="portrait" src=""><br/>
		<input id="inputportrait" type="file" accept="image/*">
	  </div>
		<div class="divgeneral">
		  <h2>General</h2>
		  <table>
			<tr>
			  <th><label for="name">Name: </label></th>
			  <td><input type="text" id="name" name="name" size="33"/></td>
			</tr>
			<tr>
			  <th><label for="name">Notes: </label></th>
			  <td><textarea class="characterdescription" rows="10" cols="33"></textarea></td>
			</tr>
			<tr>
			  <th><label for="CP">CP: </label></th>
			  <td><label id="cp"></label></td>
			</tr>
		  </table>
		</div><!-- divgeneral -->

		<div class="divattributes">
		  <h2>Attributes</h2>
		  <table>
			<thead>
			  <tr>
				<th>Category</th>
				<th>Attribute</th>
				<th>Value</th>
				<th></th>
				<th>Description</th>
			  </tr>
			</thead>
			<tbody>
			  <tr>
				<th rowspan="2">Physical</th>
				<td>Strength</td>
				<td><input type="number" min="0" max="999" id="strength" name="strength" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>strength and hardyness</td>
			  </tr>
			  <tr>
				<td>Dexterity</td>
				<td><input type="number" min="0" max="999" id="dexterity" name="dexterity" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>agility, speed, precision</td>
			  </tr>
			  <tr>
				<th rowspan="2">Mental</th>
				<td>Will</td>
				<td><input type="number" min="0" max="999" id="will" name="will" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>percevirance, attention</td>
			  </tr>
			  <tr>
				<td>Intelect</td>
				<td><input type="number" min="0" max="999" id="intelect" name="intelect" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>intellegence, knowledge</td>
			  </tr>
			  <tr>
				<th rowspan="2">Sozial</th>
				<td>Empathy</td>
				<td><input type="number" min="0" max="999" id="empathy" name="empathy" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>understanding people</td>
			  </tr>
			  <tr>
				<td>Charisma</td>
				<td><input type="number" min="0" max="999" id="charisma" name="charisma" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>interacting with people</td>
			  </tr>
			  <tr>
				<th rowspan="2">Resources</th>
				<td>Gear</td>
				<td><input type="number" min="0" max="999" id="gear" name="gear" size="3"></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>Gear you have prepared</td>
				</tr>
			  <tr>
				<td>Finances</td>
				<td><input type="number" min="0" max="999" id="finances" name="finances" size="3"/></td>
				<td><button type="button" id="rolldies" onclick="updateRollResults( this.closest('tr').querySelector('input').valueAsNumber || 0 );">&#127922;</button></td>
				<td>Money and investments </td>
			  </tr>
			  </tbody>
			</table>
		  </div> <!-- divattributes -->

		  <div class="divskills">
			<div class="divskill">
			  <div class="skill-grid-item-name">
				<b>Skill</b>
			  </div>
			  <div class="skill-grid-item-description">
			  </div>
			  <div class="skill-grid-item-cost">
				<b>Cost</b>
			  </div>
			  <div class="skill-grid-item-level">
				<b>Level</b>
			  </div>
			  <div class="skill-grid-item-use">
				<b>Use</b>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<b>Del</b>
			  </div>
			</div> <!-- divskill -->
			<div class="divskill" onmouseover="highlightresult(this.querySelector('.level').value)" onmouseout="removeresulthighlight()" onclick="highlightresult(this.querySelector('.level').value)">
			  <div class="skill-grid-item-name">
				<input type="text" name="name" class="name" value="A skill with a very very very very long name" readonly/>
			  </div>
			  <div class="skill-grid-item-description">
				<textarea rows="1" class="description" readonly>You have learned to bear harsh weather, climb over obstacles, run, dodge and shoot. You have learned dicipline and coordination.</textarea>
			  </div>
			  <div class="skill-grid-item-cost">
				<input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			  </div>
			  <div class="skill-grid-item-level">
				<input type="number" class="level" name="level" size="2" min="1" max="6" value="2"/>
			  </div>
			  <div class="skill-grid-item-use">
				<input type="checkbox" class="use" name="use"/>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<button type="button" id="deleterow" class="delrow" onclick="this.closest('.divskill').remove()">x</button>
			  </div>
			</div> <!-- divskill -->
			<div class="divskill" onmouseover="highlightresult(this.querySelector('.level').value)" onmouseout="removeresulthighlight()" onclick="highlightresult(this.querySelector('.level').value)">
			  <div class="skill-grid-item-name">
				<input type="text" name="name" size="25" class="name" value="Soldier" readonly/>
			  </div>
			  <div class="skill-grid-item-description">
				<textarea rows="1" class="description" readonly>You have learned to bear harsh weather, climb over obstacles, run, dodge and shoot. You have learned dicipline and coordination.</textarea>
			  </div>
			  <div class="skill-grid-item-cost">
				<input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			  </div>
			  <div class="skill-grid-item-level">
				<input type="number" class="level" name="level" size="2" min="1" max="6" value="2"/>
			  </div>
			  <div class="skill-grid-item-use">
				<input type="checkbox" class="use" name="use"/>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<button type="button" id="deleterow" class="delrow" onclick="this.closest('.divskill').remove()">x</button>
			  </div>
			</div> <!-- divskill -->
			<div class="divskill" onmouseover="highlightresult(this.querySelector('.level').value)" onmouseout="removeresulthighlight()" onclick="highlightresult(this.querySelector('.level').value)">
			  <div class="skill-grid-item-name">
				<input type="text" name="name" size="25" class="name" value="Trouthsayer" readonly/></div>
			  <div class="skill-grid-item-description">
				<textarea rows="1" class="description" readonly>You have learned to peer into possible futures, read people and make inferences on what will likely happen. You have learned the art of putting on an act. </textarea>
			  </div>
			  <div class="skill-grid-item-cost">
				<input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			  </div>
			  <div class="skill-grid-item-level">
				<input type="number" class="level" name="level" size="2" min="1" max="6" value="2"/>
			  </div>
			  <div class="skill-grid-item-use">
				<input type="checkbox" class="use" name="use"/>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<button type="button" id="deleterow" class="delrow" onclick="this.closest('.divskill').remove()">x</button>
			  </div>
			</div> <!-- divskill -->
			<div class="divskill" onmouseover="highlightresult(this.querySelector('.level').value)" onmouseout="removeresulthighlight()" onclick="highlightresult(this.querySelector('.level').value)">
			  <div class="skill-grid-item-name">
				<input type="text" name="name" size="25" class="name" value="Ranger" readonly/>
			  </div>
			  <div class="skill-grid-item-description">
				<textarea rows="1" class="description" readonly>You know how to survive in the wild. You can hunt, bushcraft and gather everything you need. You have honed your hearing and are proficient at tracking.</textarea>
			  </div>
			  <div class="skill-grid-item-cost">
				<input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			  </div>
			  <div class="skill-grid-item-level">
				<input type="number" class="level" name="level" size="2" min="1" max="6" value="2"/>
			  </div>
			  <div class="skill-grid-item-use">
				<input type="checkbox" class="use" name="use"/>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<button type="button" id="deleterow" class="delrow" onclick="this.closest('.divskill').remove()">x</button>
			  </div>
			</div> <!-- divskill -->
			<div class="divskill" onmouseover="highlightresult(this.querySelector('.level').value)" onmouseout="removeresulthighlight()" onclick="highlightresult(this.querySelector('.level').value)">
			  <div class="skill-grid-item-name">
				<input type="text" name="name" size="25" class="name" value="College Mage" readonly/>
			  </div>
			  <div class="skill-grid-item-description">
				<textarea rows="1" class="description" readonly>You have studied the art of magic. You learned them with books, astronomy and experiments. You can cast spells by pronouncing incantations, magical glyphs and potent periphinalia. You still need the appropriate trait to cast magic from specific schools of magic.</textarea>
			  </div>
			  <div class="skill-grid-item-cost">
				<input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			  </div>
			  <div class="skill-grid-item-level">
				<input type="number" class="level" name="level" size="2" min="1" max="6" value="2"/>
			  </div>
			  <div class="skill-grid-item-use">
				<input type="checkbox" class="use" name="use"/>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<button type="button" id="deleterow" class="delrow" onclick="this.closest('.divskill').remove()">x</button>
			  </div>
			</div> <!-- divskill -->
			<div class="divskill" onmouseover="highlightresult(this.querySelector('.level').value)" onmouseout="removeresulthighlight()" onclick="highlightresult(this.querySelector('.level').value)">
			  <div class="skill-grid-item-name">
				<input type="text" name="name" size="25" class="name" value="Survivalist" readonly/>
			  </div>
			  <div class="skill-grid-item-description">
				<textarea rows="1" class="description" readonly>You have spend quite a lot of time outdoors. Consumed books about wilderness survival and so on. You know how to build shelter, find food and water, and much more. </textarea>
			  </div>
			  <div class="skill-grid-item-cost">
				<input type="number" class="cost" name="cost" size="3" min="0" max="999" value="1" readonly/>
			  </div>
			  <div class="skill-grid-item-level">
				<input type="number" class="level" name="level" size="2" min="1" max="6" value="2"/>
			  </div>
			  <div class="skill-grid-item-use">
				<input type="checkbox" class="use" name="use"/>
			  </div>
			  <div class="skill-grid-item-deleterow">
				<button type="button" id="deleterow" class="delrow" onclick="this.closest('.divskill').remove()">x</button>
			  </div>
			</div> <!-- divskill -->
			<button type="button" id="addskill" class="addrow">+</button>
		  </div> <!-- divskills -->

		<div class="divtraits">
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <b>Trait</b>
			</div>
			<div class="trait-grid-item-description">
			</div>
			<div class="trait-grid-item-cost">
			  <b>Cost</b>
			</div>
			<div class="trait-grid-item-use">
			  <b>Use</b>
			</div>
			<div class="trait-grid-item-deleterow">
			  <b>Del</b>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" class="name" size="25" value="Friend of Nature" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You can talk to the forces of nature and have a chance to convince them to help you. This can be asking, a bird what he has seen, letting youself be concealed by a bush or calling a wild bear to aid you in combat.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" class="name" size="25" value="Illusionist" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You are adapt at creating illusions. The bigger and more complex they get the harder this is.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Speedster" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You have incredible speed. Others see only a blur when you sprint past them. This often gives you an advantage on dexterity checks and you always have at least 1 success in them.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="14" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Medium" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You can commune with ghosts and spirits. You have no control over them, but you can gain their attention.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Nightvision" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You can see in darkness as if it were light.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Sleepless" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You dont need sleep. This means you have a lot more time in a day, but you still need to rest from to much physical or mental excertion.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Flight" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You can fly. Be it with wings or otherwise. Your speed in flight is no different from your speed on land.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="16" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Tinkerer" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You can build wonderous mechanikal marvels. From clocks up to steam powered automata.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Hacker" readonly/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>You are not only proficient in computer science but you can even achieve movie worthy feats like stoping another car with only your laptop during a car chase. Tools not included.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="7" readonly/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		  <div class="divtrait">
			<div class="trait-grid-item-name">
			  <input type="text" name="name" size="25" class="name" value="Plot Armor"/>
			</div>
			<div class="trait-grid-item-description">
			  <textarea rows="1" class="description" readonly>Each scene you can discard a point of damage you would take. The plot armor only allies to one of the categories (Physical, Mental, Sozial) This trait can be taken multiple times.</textarea>
			</div>
			<div class="trait-grid-item-cost">
			  <input type="number" class="cost" name="cost" size="3" min="0" max="999" value="1"/>
			</div>
			<div class="trait-grid-item-use">
			  <input type="checkbox" class="use" name="use"/>
			</div>
			<div class="trait-grid-item-deleterow">
			  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
			</div>
		  </div> <!-- divtrait -->
		<button type="button" id="addtrait" class="addrow">+</button>
		</div> <!-- divtraits -->
		
		<div class="diveffects">
		  	  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <b>Effect</b>
				</div>
				<div class="effect-grid-item-description">
				</div>
				<div class="effect-grid-item-ep">
				  <b>EP</b>
				</div>
				<div class="effect-grid-item-number">
				  <b>Num</b>
				</div>
				<div class="effect-grid-item-deleterow">
				  <b>Del</b>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Damage" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Each success is used to cause 2 damage to an enemy. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Block" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Each success is used to remove one success from an enemies attack on you or one of your colleagues. If you win a contest with a block you can deal 1 damage per success (type appropriate to the weapon used). If an enemies block would deal damage to you it can also be blocked.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Disarm" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 2 successes disarm one enemy.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="2"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Push" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 1 success you can force your enemy to move slightly. Pushing an enemy off a cliff still gives them a check to prevent them from falling. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Disable" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>You can force an enemy into an unfavorable position. For each 2 successes the enemy is denied to use one level of his applicable skill. The enemy can recover from this with a check. The DM decides if this recovery can be blocked. Example: Putting the enemy into an ankle lock. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="2"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Gain Advantage" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 1 success each you can make your position more advantageous. This allows you to reroll 1 die on applicable checks until the end of the scene. Examples: Gaining the high ground, flanking the enemy. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Cause Disadvantage" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 1 success each you can make the enemies position more disadvantageous. This means he has to reroll 1 die that would otherwise be a success until the end of the scene. Example: Forcing the enemy into a tight corner. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Blind" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 2 successes. Take an enemies sense. Examples: Throw sand into eyes, Shatter eardrums with a loud noise.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="2"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Summon" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Per success the summoned being has 10 CP. The summon holds until the end of the scene or until the end of the concentration. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Obfuscate" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Per 4 successes you can obfuscate an area with regards to one sense. For example by causing total darkness or stopping all sound. The effect holds until the end of the scene or until the end of the concentration. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="4"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Purify Thing" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Per success you can purify one unit of a non sentient thing. For example remove poisons from one days worth of food, or remove the daemonic blight from a couple trees in the forest.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Amplify Aspect" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Per 2 successes you increase an inherent aspect of a thing by 1 level. An example is increasing the protection of an armor by 1 or increasing the weight of a stone.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="2"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Buff" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 1 success increase an attribute by 1. The effect holds until the end of the scene or until the end of the concentration.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Shape-shift" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Take the form of another being. The new forms max CP depends on the successes. Per success get 15 CP (max is the characters total CP). The effect holds until the end of the scene or until the end of the concentration.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Illusion" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly></textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Deceive" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly></textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Influence" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>You may make your victim do something they don't want to do. The game master decides how many successes you need. As orientation you can use the following examples.\n    Make your enemy drop his weapon (1 success)\n    Make a wild bird deliver a message (2 successes)\n    make your victim jump from the bridge (3 successes)</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Shape Reality" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly></textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Move" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly></textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Heal" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Per success turn 1m damage to 1s damage.</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Counter/Break" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly></textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Insight" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>per success you can gain insight with 1 sense for an additional success per distance class. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Stop" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>For 1 succes can the victim be stopped from movement. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Trigger" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>All other effects are triggered once a specific event happens. Costs 1 success. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Shape Memory" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>You may shape the memory of the victim. The game master decides how many successes you need. As orientation you can use the following examples.\n\n    Make the immigrations officer believe you have already shown him your passport (1 success).\n    Let your victim forget what happens during the duration of your spell (2 success).</textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Consume Resource" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>Different than other effects this one gives you additional successes for the value of 1 success / 2 RV. It is always up to the Gm if he allows this effect to be used. In order to consume a resource it most often needs to be prepared in some way (carving runes into it or manufacturing). </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="-99" max="0" value="-1"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div class="diveffect">
				<div class="effect-grid-item-name">
				  <input type="text" name="name" size="25" class="name" value="Block Area" readonly/>
				</div>
				<div class="effect-grid-item-description">
				  <textarea rows="1" class="description" readonly>To block some kind of thing from happening in an area (of a size like close range) you need to invest 3 successes. Add a block to this and the blocks successes will be used to reduce any attempt to achieve the thing in this area. Example: Anti magic field. </textarea>
				</div>
				<div class="effect-grid-item-ep">
				  <input type="number" class="ep" name="ep" size="3" min="0" max="999" value="3"/>
				</div>
				<div class="effect-grid-item-number">
				  <input type="number" class="count" name="count" size="3" min="0" max="999" value="0"/>
				</div>
				<div class="effect-grid-item-deleterow">
				  <button type="button" id="deleterow" class="delrow" onclick="this.closest('.divtrait').remove()">x</button>
				</div>
			  </div> <!-- diveffect -->
			  <div>
				<button type="button" id="addeffect" class="addrow">+</button>
				<label><b>EP:</b></label>
				<label id="effectstotal">10</label>
			  </div>
		</div> <!-- diveffects -->
	  </div> <!-- container -->

		<div class="footer">
		  <div class="divroll">
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 1 );">1 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 2 );">2 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 3 );">3 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 4 );">4 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 5 );">5 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 6 );">6 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 7 );">7 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 8 );">8 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 9 );">9 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 10 );">10 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 11 );">11 &#127922;</button>
			<button class="rolldiebutton" type="button" onclick="updateRollResults( 12 );">12 &#127922;</button>
			<input type="number" class="numberofdies" size="2" min="0" max="99" value="1"/>
			<button type="button" id="rolldies" onclick="updateRollResults( this.closest('div').querySelector('input').valueAsNumber || 0 );">roll</button>
		  </div>

		  <div class="divcheck">
			<table id="rollresults">
			  <tr>
				<th>Skill: </th>
				<td><span name="dice1" style='font-size:26px;'>&#9856;</span></td>
				<td><span name="dice2" style='font-size:26px;'>&#9857;</span></td>
				<td><span name="dice3" style='font-size:26px;'>&#9858;</span></td>
				<td><span name="dice4" style='font-size:26px;'>&#9859;</span></td>
				<td><span name="dice5" style='font-size:26px;'>&#9860;</span></td>
				<td><span name="dice6" style='font-size:26px;'>&#9861;</span></td>
			  </tr>
			  <tr>
				<th>Success: </th>
				<td><label name="roll1">&nbsp;</label></td>
				<td><label name="roll2">&nbsp;</label></td>
				<td><label name="roll3">&nbsp;</label></td>
				<td><label name="roll4">&nbsp;</label></td>
				<td><label name="roll5">&nbsp;</label></td>
				<td><label name="roll6">&nbsp;</label></td>
			  </tr>
			</table>
		  </div> <!-- divcheck -->
	  </div> <!-- footer -->
	</body>
	<script type="text/javascript">
	  const tx = document.getElementsByTagName("textarea");
	  for (let i = 0; i < tx.length; i++) {
		  tx[i].setAttribute("style", "height:" + (tx[i].scrollHeight) + "px;");
		  tx[i].addEventListener("input", OnInput, false);
		  tx[i].addEventListener("resize", OnInput, false);
	  }

	  function OnInput() {
		  this.style.height = 0;
		  this.style.height = (this.scrollHeight) + "px";
	  }

	  function calcTotalCP() {
		  attributes = 0;
		  attributes += document.getElementById("strength").valueAsNumber || 0;
		  attributes += document.getElementById("dexterity").valueAsNumber || 0;
		  attributes += document.getElementById("will").valueAsNumber || 0;
		  attributes += document.getElementById("intelect").valueAsNumber || 0;
		  attributes += document.getElementById("empathy").valueAsNumber || 0;
		  attributes += document.getElementById("charisma").valueAsNumber || 0;
		  attributes += document.getElementById("gear").valueAsNumber || 0;
		  attributes += document.getElementById("finances").valueAsNumber || 0;

		  skills = 0;
		  skillrows = document.querySelectorAll(".divskill");
		  for ( var i = 1; i < skillrows.length; i++ ) {
			  if(skillrows[i].querySelector('.use').checked)
				  skills += (Math.max(skillrows[i].querySelector('.level').valueAsNumber - 2, 0)) * (skillrows[i].querySelector('.cost').valueAsNumber || 0)
		  }

		  traits = 0;
		  traitrows = document.querySelectorAll(".divtrait");
		  for ( var i = 1; i < traitrows.length; i++ ) {
			  if(traitrows[i].querySelector('.use').checked)
				  traits += traitrows[i].querySelector('.cost').valueAsNumber || 0;
		  }

		  document.getElementById("cp").innerHTML = attributes*2 + skills + traits || 0;

		  effects = 0;
		  effectrows = document.querySelectorAll(".diveffect");
		  for ( var i = 1; i < effectrows.length; i++ ) {
			  effects += effectrows[i].querySelector('.ep').valueAsNumber * effectrows[i].querySelector('.count').valueAsNumber || 0;
		  }
		  document.getElementById("effectstotal").innerHTML = effects || 0;

	  }

	  function addSkillorTrait(table, layout, defaults={}, read_only=false, entryclass="") {
		  row = document.createElement("div");
		  row.setAttribute("class", "div" + entryclass);
		  // table.appendChild(row);
		  table.insertBefore(row, table.lastElementChild);
		  cell_name = document.createElement("div");
		  cell_name.setAttribute("class", entryclass + "-grid-item-name");
		  row.appendChild(cell_name);
		  input_name = document.createElement("input");
		  cell_name.appendChild(input_name);
		  input_name.setAttribute("type","text");
		  input_name.setAttribute("name","name");
		  input_name.setAttribute("size","25");
		  input_name.setAttribute("class","name");
		  cell_description = document.createElement("div");
		  cell_description.setAttribute("class", entryclass + "-grid-item-description");
		  row.appendChild(cell_description);
		  textarea_description = document.createElement("textarea");
		  textarea_description.setAttribute("class", "description");
		  textarea_description.setAttribute("rows","1");
		  textarea_description.addEventListener("input", OnInput, false);
		  cell_description.appendChild(textarea_description);

		  if(layout.cost){
			  cell_cost = document.createElement("div");
			  cell_cost.setAttribute("class", entryclass + "-grid-item-cost");
			  row.appendChild(cell_cost);
			  input_cost = document.createElement("input");
			  input_cost.setAttribute("type","number");
			  input_cost.setAttribute("class","cost");
			  input_cost.setAttribute("name","cost");
			  input_cost.setAttribute("size","3");
			  input_cost.setAttribute("min","0");
			  input_cost.setAttribute("max","999");
			  input_cost.setAttribute("value","1");
			  cell_cost.appendChild(input_cost);
		  }
		  if(layout.ep){
			  cell_ep = document.createElement("div");
			  cell_ep.setAttribute("class", entryclass + "-grid-item-ep");
			  row.appendChild(cell_ep);
			  input_ep = document.createElement("input");
			  input_ep.setAttribute("type","number");
			  input_ep.setAttribute("class","ep");
			  input_ep.setAttribute("name","ep");
			  input_ep.setAttribute("size","3");
			  input_ep.setAttribute("min","0");
			  input_ep.setAttribute("max","999");
			  input_ep.setAttribute("value","1");
			  cell_ep.appendChild(input_ep);
		  }
		  if(layout.count){
			  cell_count = document.createElement("div");
			  cell_count.setAttribute("class", entryclass + "-grid-item-count");
			  row.appendChild(cell_count);
			  input_count = document.createElement("input");
			  input_count.setAttribute("type","number");
			  input_count.setAttribute("class","count");
			  input_count.setAttribute("name","count");
			  input_count.setAttribute("size","3");
			  input_count.setAttribute("min","0");
			  input_count.setAttribute("max","999");
			  input_count.setAttribute("value","0");
			  cell_count.appendChild(input_count);
		  }
		  if(layout.level){
			  cell_level = document.createElement("div");
			  cell_level.setAttribute("class", entryclass + "-grid-item-level");
			  row.appendChild(cell_level);
			  input_level = document.createElement("input");
			  input_level.setAttribute("type","number");
			  input_level.setAttribute("class","level");
			  input_level.setAttribute("name","level");
			  input_level.setAttribute("size","2");
			  input_level.setAttribute("min","1");
			  input_level.setAttribute("max","6");
			  input_level.setAttribute("value","2");
			  cell_level.appendChild(input_level);
			  row.setAttribute("onmouseover","highlightresult(this.querySelector('.level').value)");
			  row.setAttribute("onmouseout","removeresulthighlight()");
			  row.setAttribute("onclick","highlightresult(this.querySelector('.level').value)");
		  }
		  if(layout.checkbox){
			  cell_checkbox = document.createElement("div");
			  cell_checkbox.setAttribute("class", entryclass + "-grid-item-use");
			  row.appendChild(cell_checkbox);
			  input_checkbox = document.createElement("input");
			  input_checkbox.setAttribute("type","checkbox");
			  input_checkbox.setAttribute("class","use");
			  input_checkbox.setAttribute("name","use");
			  cell_checkbox.appendChild(input_checkbox);
		  }
		  cell_deletebutton = document.createElement("div");
		  cell_deletebutton.setAttribute("class", entryclass + "-grid-item-deleterow");
		  row.appendChild(cell_deletebutton);
		  button_deleterow = document.createElement("button");
		  button_deleterow.setAttribute("type","button");
		  button_deleterow.setAttribute("id","deleterow");
		  button_deleterow.setAttribute("class","delrow");
		  button_deleterow.setAttribute("onclick","this.closest('.div"+entryclass+"').remove()");
		  button_deleterow.textContent = "x";
		  cell_deletebutton.appendChild(button_deleterow);
		  if(read_only){
			  input_name.setAttribute("readonly",true);
			  input_description.setAttribute("readonly",true);
			  input_cost.setAttribute("readonly",true);
		  }
		  if(defaults.name){
			  input_name.setAttribute("value", name);
		  }
		  if(defaults.description){
			  input_description.setAttribute("value", description);
		  }
		  if(defaults.cost){
			  input_cost.setAttribute("value", cost);
		  }
	  }

	  function addPredefinedSkill(name,desc,cost) {
		  table = document.querySelector(".divskills");
		  layout = {
			  level: true,
			  cost: true,
			  ep: false,
			  count: false,
			  checkbox: false
		  };
		  defaults = {
			  name: name,
			  description: desc,
			  cost: cost
		  };
		  addSkillorTrait(table, layout, defaults, read_only=true);
	  }
	  function addPredefinedTrait(name,desc,cost) {
		  layout = {
			  level: false,
			  cost: true,
			  ep: false,
			  count: false,
			  checkbox: true
		  };
		  defaults = {
			  name: name,
			  description: desc,
			  cost: cost
		  };
		  table = document.querySelector(".divtraits");
		  addSkillorTrait(table, layout, defaults, read_only=true, entryclass="trait");
	  }

	  function addSkill() {
		  skillstable = document.querySelector(".divskills");
		  layout = {
			  level: true,
			  cost: true,
			  ep: false,
			  count: false,
			  checkbox: true
		  };
		  addSkillorTrait(skillstable, layout, defaults={}, read_only=false, entryclass="skill");
	  }

	  function addTrait() {
		  traitstable = document.querySelector(".divtraits");
		  layout = {
			  level: false,
			  cost: true,
			  ep: false,
			  count: false,
			  checkbox: true
		  };
		  addSkillorTrait(traitstable, layout, defaults={}, read_only=false, entryclass="trait");
	  }

	  function addEffect() {
		  effectstable = document.querySelector(".diveffects");
		  layout = {
			  level: false,
			  cost: false,
			  ep: true,
			  count: true,
			  checkbox: false
		  };
		  addSkillorTrait(effectstable, layout, defaults={}, read_only=false, entryclass="effect");
	  }

	  document.getElementById("addskill").onclick = addSkill;
	  document.getElementById("addtrait").onclick = addTrait;
	  document.getElementById("addeffect").onclick = addEffect;
	  document.addEventListener("change", calcTotalCP);
	  calcTotalCP();

	  function dies(n){
		  var rolls = []
		  for(var i=0; i<n; i++){
			  rolls.push(Math.floor(Math.random() * 6) + 1);
		  }
		  return rolls
	  }

	  function countEyes(rolls){
		  return [
			  rolls.filter(x => x <= 1).length,
			  rolls.filter(x => x <= 2).length,
			  rolls.filter(x => x <= 3).length,
			  rolls.filter(x => x <= 4).length,
			  rolls.filter(x => x <= 5).length,
			  rolls.filter(x => x <= 6).length
		  ]
	  }

	  function removeresulthighlight() {
		  document.getElementById("rollresults").querySelectorAll("[name^=roll]").forEach(e => e.setAttribute("class","resultnormal"));
		  document.getElementById("rollresults").querySelectorAll("[name^=dice]").forEach(e => e.setAttribute("class","resultnormal"));
	  }
	  function obscureresult() {
		  document.getElementById("rollresults").querySelectorAll("[name^=roll]").forEach(e => e.setAttribute("class","resultobscured"));
		  document.getElementById("rollresults").querySelectorAll("[name^=dice]").forEach(e => e.setAttribute("class","resultobscured"));
	  }
	  function highlightresult(n) {
		  obscureresult()
		  document.getElementById("rollresults").querySelector("[name=roll"+n+"]").setAttribute("class","resulthighlighted");
		  document.getElementById("rollresults").querySelector("[name=dice"+n+"]").setAttribute("class","resulthighlighted");
	  }

	  function updateRollResults(n){
		  var counts = countEyes(dies( n ));
		  document.querySelector("[name=roll1]").textContent = counts[0];
		  document.querySelector("[name=roll2]").textContent = counts[1];
		  document.querySelector("[name=roll3]").textContent = counts[2];
		  document.querySelector("[name=roll4]").textContent = counts[3];
		  document.querySelector("[name=roll5]").textContent = counts[4];
		  document.querySelector("[name=roll6]").textContent = counts[5];
	  }

	  function changePortrait() {
		  var f = document.getElementById("inputportrait").files[0];
		  document.getElementById("portrait").src = URL.createObjectURL( f );
	  }

	  function changeTabName() {
		document.title = document.getElementById("name").value
	  }
	  document.getElementById("name").onchange = changeTabName;

	  document.getElementById("inputportrait").onchange = changePortrait;
	  OnInput();
	</script>
  </html>




